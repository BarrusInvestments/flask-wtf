[tox]
envlist =
    py{26,27,33,34,35,36}
    pypy
    py-babelex
    py-no-babel
    docs
    coverage-report

[testenv]
deps =
    coverage
    pytest>=3
    flask-babel
    flask-uploads
commands = coverage run -p -m pytest

[testenv:py-babelex]
deps =
    coverage
    pytest>=3
    flask-babelex
commands = coverage run -p -m pytest

[testenv:py-no-babel]
deps =
    coverage
    pytest>=3
commands = coverage run -p -m pytest

[testenv:docs]
deps = sphinx
commands =
    sphinx-build -W -b html -d docs/_build/doctrees docs docs/_build/html
    sphinx-build -W -b linkcheck -d docs/_build/doctrees docs docs/_build/linkcheck

[testenv:coverage-report]
passenv = TRAVIS TRAVIS_JOB_ID TRAVIS_BRANCH
deps = coveralls
skip_install = true
commands =
    coverage combine
    coverage report
    coverage html
    - coveralls
